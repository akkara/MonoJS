/*
 * MonoJS v1.0.1
 * http://github.com/akkara/MonoJS
 *
 * Copyright (c) 2013 Kadir Yardımcı
 * Licensed under the MIT license.
 */
(function(e){e.fn.extend({mono:function(t,n){t=e.extend({color:"#ffffff",black:"#000000",bounce:700,speed:1e3,hide:false},t);var r=0;var i=document.createElement("canvas");if(typeof i.toDataURL!="function"){r=1}else{var s=document.createElement("img");i.width=1;i.height=1;s.src=i.toDataURL("this/jpeg");if(s.src=="data:,"){r=2}}if(r){if(t.hide){e(this).css("opacity",0)}if(typeof n=="function"){n(this,r)}return this}var o=parseInt(t.color.substr(1,2),16);var u=parseInt(t.color.substr(3,2),16);var a=parseInt(t.color.substr(5,2),16);var f=parseInt(t.black.substr(1,2),16);var l=parseInt(t.black.substr(3,2),16);var c=parseInt(t.black.substr(5,2),16);var h=0,p=1,d=2;var v=[];this.each(function(){var n=this,r=e(n);var i=e.Deferred();v.push(i);r.css("opacity",0);v.push(r.one("load",function(){var s=cw=this.width;var v=ch=this.height;if(s>t.bounce||v>t.bounce){if(s>v){ch=s*t.bounce/v;cw=t.bounce}else{cw=v*t.bounce/s;ch=t.bounce}}var m=document.createElement("canvas");m.width=cw;m.height=ch;var y=m.getContext("2d");y.drawImage(n,0,0,cw,ch);var w=y.getImageData(0,0,cw,ch);var E=w.data;var S=E.length;for(var x=0;x<S;x+=4){var T=E[x+h]*.3+E[x+p]*.59+E[x+d]*.11;E[x+h]=(o-f)/255*T+f;E[x+p]=(u-l)/255*T+l;E[x+d]=(a-c)/255*T+c}y.putImageData(w,0,0);e.data(r,"src",n.src);n.src=m.toDataURL("this/jpeg");i.resolve();if(t.speed){r.delay(100).animate({opacity:1},t.speed)}else{r.delay(100).css("opacity",1)}}))});if(typeof n=="function"){e.when.apply(null,v).then(function(){n(this,true)})}return this}})})(jQuery)